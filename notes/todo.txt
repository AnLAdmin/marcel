- Complete Python string parsing

- Complete shell string parsing (termination on things other than EOL
  and whiteapce).

- Licensing header

util.py:

- quote

- Debugging & verbosity level

- Make File comparisons work -- based on absolute path.

- Should the name of map be changed? f as in osh? apply? map doesn't
  really make sense when used as a generator. Could have gen handle
  this case through a function argument mutually exclusive with other
  args. So "gen 5" works like it always had, but "gen (5)" generates a
  5?!

- What happens to processes that disappear? E.g. ps | .... ps yields
  non-existent processes which are then used downstream. Can this even
  happen?

- ps: If commandline blank, take contents of status file? That's what
  ps appears to do.

- more/less commands

- File navigation (parent, children, ...)

- ^emacs works -- a new window running GUI emacs is created. So does
  ^emacs -nw, doing exactly the right thing (non-graphical, in current
  terminal). But ^vi does not. Nothing appears to happen. But vi is
  listening for input, so :q exits. stderr complains about not being a
  terminal, but this isn't visible. Vi DOES work if subprocess.run
  omits stdout=PIPE and stderr=PIPE.

- redirection

- Organize internal ops -- Fork, LabelThread

- osh1 fork has to be first in top-level pipeline. Relax this?

- LOOK AT SHLEX MODULE -- COMMAND-LINE PARSING AND QUOTING

- .marcel.py might want a cluster named jao and a terminal profile
  named jao. Need separate namespaces for these things.

- out.receive does a lot of work. Precompute whatever can be.

- pushd/popd

- How do exit codes fit in?

- Redirection: < > >>. > and >> are taken care of by out -f and out -a,
  aren't they?

----------------------------------------------------------------------

Executables (without the bash op)

- How to invoke the bash --interactive flag?

- What if there is an arg that is significant to marcel parsing, e.g. [, (.

----------------------------------------------------------------------

Glob patterns and marcel syntax both use [].

    M jao@cheese:/tmp/d$ ls [a-c]* | rm
    Parsing error at position 4 of "ls [a-c]* | rm": Expected string or pipe

Could handle the situation by being context-sensitive during the
parse.

----------------------------------------------------------------------

Get rid of "from ... import ..."

----------------------------------------------------------------------

Provide a way to specify farcel config path. Maybe as a property of
the cluster.


----------------------------------------------------------------------

Can squish be eliminated in favor of some variation of red? 

Could at least generalize similar to expand. E.g. squish 1 would take
a sequence in position 1 and squish just that. So

(1, [[1]])
(2, [[2], [2]])
(3, [[3], [3], [3]])

 ->

(1, [1])
(2, [2, 2])
(3, [3, 3, 3])

----------------------------------------------------------------------

Need a flag for cp, mv, to prevent clobbering existing files. (Check
before doing anything, even though that isn't foolproof.)

----------------------------------------------------------------------

mv looks buggy. Setup considers last filename as target. This is
BEFORE glob expansion, which is wrong. Write more tests, fix code.

bash: mv glob ... 

- Takes the last identified file as the target. So mv * is fine.

- EXCEPT if the last item on the command line is a glob, which
  describes no files, then the item itself is interpreted as a
  filename. And if THAT doesn't exist, then mv complains about there
  being no target. So mv a* b* moves everything into the last thing
  identified by b*. If b* doesn't identify anything, then "b*" is
  assumed to be the file. 

- But it ALSO depends on how many things are being moved. If nothing
  is identifed by b*, then mv a* b* will work as follows:

  - a* identifies > 1 file: Complain that directory b* does not exist.
  - a* identifies 1 file: Move the matched file to "b*".
  - a* identifies 0 files: Complain that "a*" does not exist.

mv a* b* (a* > 1 file, b* does not exist) protects against
accidentally using the last a* file/dir as a target. Which is good.

Have marcel be more explicit:

- Last FILENAME is the target.

- Take files being moved from upstream if one FILENAME is specified
  (the target). I.e., base it on the number of FILENAMEs, not the
  number of qualifying things after glob expansion.

----------------------------------------------------------------------

Distinct color for broken symlink.

----------------------------------------------------------------------

"rm dir" just works. Should a flag be required to minimize accidents?

----------------------------------------------------------------------

symlinks need a LOT of work. pathlib.samefile follows symlinks, for
example.
